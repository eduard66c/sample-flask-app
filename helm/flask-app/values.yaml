# Default values for flask-app Helm chart

# Flask Application Configuration
flaskApp:
  # Image configuration
  image:
    repository: sample-flask-app-flask-app
    tag: latest
    pullPolicy: IfNotPresent

  # Container port
  port: 5000

  # Environment variables
  env:
    FLASK_ENV: production

  # Resource requests and limits
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Liveness and readiness probes
  livenessProbe:
    httpGet:
      path: /
      port: 5000
    initialDelaySeconds: 30
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 3

  readinessProbe:
    httpGet:
      path: /
      port: 5000
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 10
    failureThreshold: 3

# Promtail Sidecar Configuration
promtail:
  enabled: true
  image:
    repository: grafana/promtail
    tag: latest
    pullPolicy: IfNotPresent

  port: 9080

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # Loki client configuration
  loki:
    url: http://loki:3100/loki/api/v1/push

# Deployment Configuration
replicaCount: 1

# Service Configuration
service:
  type: ClusterIP
  port: 5000
  targetPort: 5000

# Namespace
namespace: monitoring

# Pod annotations
podAnnotations: {}

# Security context
podSecurityContext: {}
  # runAsNonRoot: true
  # runAsUser: 1000
  # fsGroup: 1000

securityContext: {}
  # allowPrivilegeEscalation: false
  # readOnlyRootFilesystem: true
  # capabilities:
  #   drop:
  #     - ALL

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}